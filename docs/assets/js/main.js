"use strict";const input=document.querySelector(".js_input"),buttonSearch=document.querySelector(".js_button"),seriesList=document.querySelector(".js_list");let series=[],html="",favouriteList=document.querySelector(".js_favourites"),favourites=[],favClass="",htmlFav="";function urlCreator(){return"//api.tvmaze.com/search/shows?q="+input.value}function paintSeries(){for(const e of series){const s=e.show.id,t=e.show.name,i=e.show.image,l=searchFavourites(e);if(favClass=l?"__clicked":"",html+=`<li class="list__elements js_elements" id= "${s}">`,null===i){html+=`<img class="list__elements--image${favClass} js_image" src="${"https://via.placeholder.com/210x295/ffffff/666666/text=TV"}" alt="Cartel de la serie"></img>`}else html+=`<img class="list__elements--image${favClass} js_image" src="${i.original}" alt="Cartel de la serie"></img>`;html+=`<p class="list__elements--series${favClass} js_series">${t}</p>`,html+="</li>"}seriesList.innerHTML=html,listenerSelection()}function handleSearchSeries(e){e.preventDefault();let s=urlCreator();fetch(s).then(e=>e.json()).then(e=>{series=e,console.log(series),paintSeries()})}function handleFavSelect(e){const s=parseInt(e.currentTarget.id);console.log(s);const t=series.find(e=>e.show.id===s);console.log(t);if(-1===favourites.findIndex(e=>e.show.id===s)){favourites.push(t)}paintFavourites()}function searchFavourites(e){return void 0!==favourites.find(s=>s.show.id===e.show.id)}function paintFavourites(e){for(const e of favourites){console.log(favourites);const s=e.show.name,t=e.show.image;if(htmlFav+='<li class="favourites__series js_favElements" >',htmlFav+='<div class="favourites__elements">',null===t){html+='<img class="favourites__elements--image js_favImage" src="" alt="Cartel de la serie"></img>'}else htmlFav+=`<img class="favourites__elements--image js_favImage" src="${t.original}" alt="Cartel de la serie"></img>`;htmlFav+=`<p class="favourites__elements--series js_favSeries">${s}</p>`,htmlFav+="</div>",htmlFav+='<i class ="favourites__button">X</i>',htmlFav+="</li>"}favouriteList.innerHTML=htmlFav}function listenerSelection(){const e=document.querySelectorAll(".js_elements");for(const s of e)s.addEventListener("click",handleFavSelect)}buttonSearch.addEventListener("click",handleSearchSeries);