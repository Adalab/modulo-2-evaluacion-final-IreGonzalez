"use strict";const input=document.querySelector(".js_input"),buttonSearch=document.querySelector(".js_button"),seriesList=document.querySelector(".js_list");let series=[],favouriteList=document.querySelector(".js_favourites"),favourites=[];function urlCreator(){return"//api.tvmaze.com/search/shows?q="+input.value}function paintSeries(){let e="",s="";seriesList.innerHTML="";for(const t of series){const i=t.show.id,a=t.show.name,r=t.show.image;if(s=searchFavourites(t)?"__clicked":"",e+=`<li class="list__elements js_elements" id= "${i}">`,null===r){e+=`<img class="list__elements--image${s} js_image" src="${"https://via.placeholder.com/210x295/ffffff/666666/text=TV"}" alt="Cartel de la serie"></img>`}else e+=`<img class="list__elements--image${s} js_image" src="${r.original}" alt="Cartel de la serie"></img>`;e+=`<p class="list__elements--series${s} js_series">${a}</p>`,e+="</li>"}seriesList.innerHTML=e,listenerSelection()}function handleSearchSeries(e){e.preventDefault();let s=urlCreator();fetch(s).then(e=>e.json()).then(e=>{series=e,console.log(series),paintSeries()})}let favSelected=[];function handleFavSelect(e){const s=parseInt(e.currentTarget.id),t=series.find(e=>e.show.id===s),i=favourites.findIndex(e=>e.show.id===s);if(favSelected=t,-1===i){favourites.push(t);paintFavList(favSelected),savedFavList()}else{favourites.splice(i,1),savedFavList(),favouriteList.innerHTML="";for(const e of favourites)paintFavList(e)}paintSeries(),console.log(favourites)}function paintFavList(e){let s="";const t=e.show.name,i=e.show.image;if(s+='<li class="favourites__series js_favElements" >',s+='<div class="favourites__elements">',null===i){html+='<img class="favourites__elements--image js_favImage" src="" alt="Cartel de la serie"></img>'}else s+=`<img class="favourites__elements--image js_favImage" src="${i.original}" alt="Cartel de la serie"></img>`;s+=`<p class="favourites__elements--series js_favSeries">${t}</p>`,s+="</div>",s+='<i class ="favourites__button js_removeButton">X</i>',s+="</li>",favouriteList.innerHTML=s}function searchFavourites(e){return void 0!==favourites.find(s=>s.show.id===e.show.id)}function listenerSelection(){const e=document.querySelectorAll(".js_elements");for(const s of e)s.addEventListener("click",handleFavSelect)}function savedFavList(){localStorage.setItem("favourites",JSON.stringify(favourites))}function getLocalStorage(){const e=JSON.parse(localStorage.getItem("favourites"));favourites=null===e?[]:e;for(const e of favourites)paintFavList(e)}getLocalStorage(),console.log(favourites),buttonSearch.addEventListener("click",handleSearchSeries);